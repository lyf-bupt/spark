<!--
    * Licensed to the Apache Software Foundation (ASF) under one
    * or more contributor license agreements.  See the NOTICE file
    * distributed with this work for additional information
    * regarding copyright ownership.  The ASF licenses this file
    * to you under the Apache License, Version 2.0 (the
    * "License"); you may not use this file except in compliance
    * with the License.  You may obtain a copy of the License at
    * 
    *   http://www.apache.org/licenses/LICENSE-2.0
    * 
    * Unless required by applicable law or agreed to in writing,
    * software distributed under the License is distributed on an
    * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    * KIND, either express or implied.  See the License for the
    * specific language governing permissions and limitations
    * under the License.    
-->
<html>
<head>
<title>Store Mashup</title>
		
<script type="text/javascript" src='/openajax/OpenAjax.js'></script>

<script type="text/javascript" src="/mashup/store-mash.js"></script>

<script language="JavaScript">

	//@Reference
	var storeGadget = new tuscany.sca.Reference("storeGadget");
	
	//@Reference
	var mapGadget = new tuscany.sca.Reference("mapGadget");
	
	function storeGadget_getResponse(gadget) {
		var gadget1 = document.getElementById('gadget1').contentDocument;
		gadget1.open();
		gadget1.write(gadget);
		gadget1.close();
	}
	
	function mapGadget_getResponse(gadget) {
		var gadget2 = document.getElementById('gadget2').contentDocument;
		gadget2.open();
		gadget2.write(gadget);
		gadget2.close();
	}
	
	function init() {
		window.top.hub = OpenAjax.hub;
		
		storeGadget.get('', storeGadget_getResponse);
		mapGadget.get('', mapGadget_getResponse);
	}
	
</script>
</head>
		
<body onload="init()">
<h1>Store Mashup</h1>
<br>
<table border="0" cellpadding="0" cellspacing="2">
	<tr>
    	<td><iframe id="gadget1" style='overflow:hidden;width:400px;height:500px;border:1px solid black;'></iframe></td>
        <td><iframe id="gadget2" style='overflow:hidden;width:400px;height:500px;border:1px solid black;'></iframe></td>
	</tr>
</table>

</body>         
</html>
